{% load static %}
<!DOCTYPE html>
<html lang=\"fr\" class=\"h-full transition-all duration-500 ease-in-out\" x-data=\"{ darkMode: localStorage.getItem('theme') === 'dark', sidebarOpen: true }\" :class=\"{ 'dark': darkMode }\">
<head>
    <meta charset=\"UTF-8\">
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">
    <title>{% block title %}UpdatEngine Modern{% endblock %}</title>
    
    <!-- Ultra-Sleek Modern Stack -->
    <script src=\"https://cdn.tailwindcss.com\"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#1e293b',
                        accent: '#f59e0b',
                        darkBg: '#0f172a',
                        sidebar: '#1a1c1e'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <script defer src=\"https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js\"></script>
    <script src=\"https://unpkg.com/htmx.org@1.9.10\"></script>
    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        [x-cloak] { display: none !important; }
        
        /* Custom Scrollbar for Sleek Look */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #334155; }
        
        /* Glassmorphism Effects */
        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .dark .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
    
    {% block extra_head %}{% endblock %}
</head>
<body class=\"h-full overflow-hidden bg-gray-50 dark:bg-darkBg text-gray-900 dark:text-gray-100 transition-colors duration-300\">
    
    <div class=\"flex h-screen overflow-hidden\">
        
        <!-- SIDEBAR - Ultra Modern -->
        <aside 
            x-cloak
            class=\"relative flex flex-col flex-shrink-0 bg-sidebar text-white shadow-2xl transition-all duration-500 ease-in-out z-20\"
            :class=\"sidebarOpen ? 'w-64' : 'w-20'\"
        >
            <!-- Logo area with Glow -->
            <div class=\"h-20 flex items-center px-6 border-b border-gray-800/50\">
                <div class=\"flex items-center space-x-4\">
                    <div class=\"relative flex-shrink-0 group\">
                        <div class=\"absolute -inset-1 bg-gradient-to-r from-blue-600 to-cyan-400 rounded-lg blur opacity-40 group-hover:opacity-100 transition duration-1000 group-hover:duration-200\"></div>
                        <div class=\"relative w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-lg\">
                            <i class=\"fas fa-bolt text-white text-lg\"></i>
                        </div>
                    </div>
                    <span x-show=\"sidebarOpen\" x-transition:enter=\"transition ease-out duration-300\" x-transition:enter-start=\"opacity-0 -translate-x-4\" x-transition:enter-end=\"opacity-100 translate-x-0\" class=\"text-xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\">UE Modern</span>
                </div>
            </div>

            <!-- Navigation Links -->
            <nav class=\"flex-1 px-3 mt-6 space-y-2 overflow-y-auto\">
                <a href=\"/\" class=\"flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 group hover:bg-white/10\" :class=\"{ 'bg-blue-600/20 text-blue-400': window.location.pathname === '/' }\">
                    <i class=\"fas fa-chart-pie w-6 text-lg group-hover:scale-110 transition-transform\"></i>
                    <span x-show=\"sidebarOpen\" class=\"ml-3\">Dashboard</span>
                </a>
                
                <a href=\"/inventory/\" class=\"flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 group hover:bg-white/10\">
                    <i class=\"fas fa-microchip w-6 text-lg group-hover:scale-110 transition-transform\"></i>
                    <span x-show=\"sidebarOpen\" class=\"ml-3\">Parc & Inventaire</span>
                </a>

                <a href=\"/deploy/\" class=\"flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 group hover:bg-white/10\">
                    <i class=\"fas fa-rocket w-6 text-lg group-hover:scale-110 transition-transform\"></i>
                    <span x-show=\"sidebarOpen\" class=\"ml-3\">Déploiements</span>
                </a>

                <div class=\"pt-6 pb-2 px-4 text-[10px] font-bold text-gray-500 uppercase tracking-widest\" x-show=\"sidebarOpen\">Système</div>
                
                <a href=\"/admin/\" class=\"flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 group hover:bg-white/10\">
                    <i class=\"fas fa-shield-halved w-6 text-lg group-hover:scale-110 transition-transform\"></i>
                    <span x-show=\"sidebarOpen\" class=\"ml-3\">Console Admin</span>
                </a>
            </nav>

            <!-- User & Theme Bottom Bar -->
            <div class=\"p-4 border-t border-gray-800/50\">
                <div class=\"flex items-center justify-between\" :class=\"sidebarOpen ? '' : 'flex-col space-y-4'\">
                    <button @click=\"darkMode = !darkMode; localStorage.setItem('theme', darkMode ? 'dark' : 'light')\" class=\"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\">
                        <i class=\"fas\" :class=\"darkMode ? 'fa-sun text-yellow-400' : 'fa-moon text-blue-400'\"></i>
                    </button>
                    <div x-show=\"sidebarOpen\" class=\"flex items-center space-x-3\">
                        <img class=\"h-8 w-8 rounded-full border-2 border-blue-500\" src=\"https://ui-avatars.com/api/?name={{ user.username }}&background=3b82f6&color=fff\" alt=\"\">
                        <div class=\"text-xs\">
                            <p class=\"font-bold\">{{ user.username }}</p>
                            <p class=\"text-gray-500\">CD83 Admin</p>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <div class=\"flex flex-col flex-1 min-w-0 overflow-hidden relative\">
            
            <!-- Dynamic Topbar -->
            <header class=\"h-20 flex items-center justify-between px-8 glass border-b shadow-sm relative z-10\">
                <div class=\"flex items-center\">
                    <button @click=\"sidebarOpen = !sidebarOpen\" class=\"mr-6 text-gray-500 hover:text-blue-600 focus:outline-none transition-colors\">
                        <i class=\"fas fa-bars-staggered text-xl\"></i>
                    </button>
                    <div class=\"relative hidden md:block\">
                        <span class=\"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400\">
                            <i class=\"fas fa-search text-xs\"></i>
                        </span>
                        <input type=\"text\" placeholder=\"Rechercher partout... (Ctrl+K)\" class=\"block w-80 pl-10 pr-3 py-2 bg-gray-100 dark:bg-darkBg border-none rounded-2xl text-sm focus:ring-2 focus:ring-blue-500/50 transition-all\">
                    </div>
                </div>
                
                <div class=\"flex items-center space-x-6\">
                    <div class=\"flex flex-col items-end text-right mr-2\">
                        <span class=\"text-xs font-bold uppercase tracking-tighter text-blue-600 dark:text-blue-400\">Status Serveur</span>
                        <span class=\"flex items-center text-[10px] font-medium text-green-500\">
                            <span class=\"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5 animate-pulse\"></span>Opérationnel
                        </span>
                    </div>
                    <button class=\"relative p-2 text-gray-400 hover:text-blue-600 transition-colors\">
                        <i class=\"far fa-bell text-xl\"></i>
                        <span class=\"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-darkBg\"></span>
                    </button>
                </div>
            </header>

            <!-- CONTENT BODY -->
            <main class=\"flex-1 relative overflow-y-auto focus:outline-none p-8\">
                {% block content %}{% endblock %}
            </main>
            
        </div>
    </div>

    {% block extra_js %}{% endblock %}
</body>
</html>
